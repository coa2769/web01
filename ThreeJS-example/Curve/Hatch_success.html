<!DOCTYPE html>
<html lang="en">

<head>
    <title>Example geometries-plane</title>
    <meta charset="UTF-8">
    <script src="../js/three.js"></script>
    <style>
        body {
            margin: 0;
            overflow: hidden;
        }
    </style>
</head>

<body>
    <div id="WebGL-output">

    </div>
    <script>
        let WIDTH = 100;
        let HEIGHT = 100;

        //로딩이 끝나면 Three.js를 숭행한다.
        function init() {
            //여기에 Three.js코드를 추가한다.
            let scene = new THREE.Scene();
            let camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 1, 500);
            camera.position.set(0, 0, 500);
            let renderer = new THREE.WebGLRenderer();
            renderer.setSize(window.innerWidth, window.innerHeight);
            //html 추가
            document.body.appendChild(renderer.domElement);

            //Geometries
            //let geometry = THREE.PlaneGeometry(width, height, widthSegments, heightSegments);
            //widthSegments : 너비가 분할되어야 할 세그먼트의 수.
            //heightSegments : 높이가 분할되어야 할 세그먼트 수.
            let geometry = new THREE.PlaneGeometry(WIDTH, HEIGHT, 20, 32);

            //canvas
            let bitmap = document.createElement('canvas');
            let ctx = bitmap.getContext('2d');
            bitmap.width = WIDTH;
            bitmap.height = HEIGHT;

            //ctx.fillStyle = 'red';
            //ctx.fillRect(0, 0, bitmap.width, bitmap.height);
            ctx.fillStyle = 'white';
            ctx.fillRect(10, 10, bitmap.width - 20, bitmap.height - 20);

            //1. canvas는 직사각형외의 다른 도형을 그리기 위해서는 
            //하나 이상의 path와 여러점으로 이어진 선을 만들어야한다.
            ctx.beginPath();
            // ctx.strokeStyle = '#000000'; 선 색깔 변경


            //2. path 메소드 : 물체를 구설할 때 필요한 경로 설정
            //※ 나중에 어떻게 움직이는지 확인
            ctx.translate(bitmap.width / 2, bitmap.height / 2);
            ctx.rotate(300 * Math.PI / 180);

            let x = -WIDTH;
            let y = -HEIGHT;
            for (i = 0; i < 200; i++) {
                ctx.moveTo(x, y + i * 10 + 1);
                ctx.lineTo(x + WIDTH * 2, y + i * 10 + 1);
                ctx.stroke(); //이걸로 선을 끊는다.
            }
            //3. 현재 하위 경로의 시작 부분과 연결된 직선을 추가
            //ctx.closePath();


            //texture
            let texture = new THREE.Texture(bitmap);
            texture.needsUpdate = true;

            //material
            let material = new THREE.MeshBasicMaterial({
                map: texture
            });

            // let material = new THREE.MeshBasicMaterial({
            //     color: 0xffff00,
            //     side: THREE.DoubleSide
            // });

            //mesh
            let plane = new THREE.Mesh(geometry, material);
            scene.add(plane);

            renderer.render(scene, camera);
            // let meshMaterial = new THREE.MeshNormalMaterial();
            // meshMaterial = THRE.DoubleSide;
            // var wireFrameMateri

        };

        function createMesh(geom) {
            let texture = THREE.ImageUtils.loadTexture("../texture.jpeg");
            let mat = new THREE.MeshPhongMaterial();
            mat.map = texture;

            let mesh = new THREE.Mesh(geom, mat);
            return mesh;
        }

        window.onload = init;
    </script>
</body>

</html>